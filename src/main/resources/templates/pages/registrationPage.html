<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Registration</title>
    <link rel="stylesheet" type="text/css" th:href="@{/css/styles.css}">
</head>

<body>
<div id="basic">
    <h1>Register</h1>
    <form th:action="@{register}" method="post">
        <label for="fName"> First Name: </label>
        <input type="text" class="form-control" id="fName" placeholder="Fabian"
               th:name="fName" th:value="*{fName}" data-cy="fName" required autofocus>
        <br/>
        <label for="lName"> Last Name: </label>
        <input type="text" class="form-control" id="lName" placeholder="Gilson"
               th:name="lName" th:value="*{lName}" data-cy="lName" autofocus>
        <br/>
        <input type="checkbox" class="form-control" id="noSurnameCheckBox"
               th:name="noSurnameCheckBox" th:checked="*{noSurnameCheckBox}" data-cy="noSurnameCheckBox"
               onclick="toggleInput()" autofocus>
        <label for="noSurnameCheckBox"> No last name </label>
        <br/>
        <label for="email"> Email: </label>
        <input type="email" class="form-control" id="email" placeholder="fabian.gilson@canterbury.ac.nz"
               th:name="email" th:value="*{email}" data-cy="email" size="40" required autofocus>
        <br/>

        <label for="password"> Password: </label>
        <input type="password" class="form-control" id="password"
               th:name="password" th:value="*{password}" data-cy="password" required autofocus>
        <br/>
        <label for="retypePassword"> Re-type Password: </label>
        <input type="password" class="form-control" id="retypePassword"
               th:name="retypePassword" th:value="*{retypePassword}" data-cy="retypePassword" required autofocus>
        <br/>
        <label for="dob"> Date Of Birth: </label>
        <input type="date" class="form-control" id="dob"
               th:name="dob" th:value="*{dob}" data-cy="dob" required autofocus>
        <br/>

        <div th:if="${errorMessage}">
            <div th:replace="~{fragments/errorMessageFragment :: errorMessage(message=${errorMessage})}"></div>
        </div>

        <div id="next">
            <button type="submit">Sign Up</button>
        </div>

        <div id="cancel">
            <a th:href="@{.}">Cancel</a>
        </div>

    </form>
</div>
<script>
    // Function to disable last name input field if the 'no surname' checkbox is checked
    function toggleInput() {
        let checkbox = document.getElementById('noSurnameCheckBox');
        let textField = document.getElementById('lName');

        if (checkbox.checked) {
            textField.value = '';
            textField.readOnly = true;
        } else {
            textField.readOnly = false;
        }
    }
</script>
</body>
</html>
